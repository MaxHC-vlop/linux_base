### Системные прошивки и загрузчики

#### 1. **Системные прошивки (BIOS/UEFI)**
- **BIOS** (Basic Input/Output System) — устаревший стандарт, используемый для инициализации оборудования и загрузки системы.
- **UEFI** (Unified Extensible Firmware Interface) — современный стандарт, заменяющий BIOS. Поддерживает GPT (таблицу разделов GUID) и файловую систему FAT.
- **Основные функции прошивки**:
  - Инициализация оборудования.
  - Определение загрузочного устройства.
  - Запуск загрузчика.

#### 2. **Различия между BIOS и UEFI**
- **BIOS**:
  - Использует MBR (Master Boot Record) для загрузки.
  - Ограничен 512 байтами для загрузочного кода.
  - Загрузка через цепочку: MBR → загрузочный сектор → вторичный загрузчик.
- **UEFI**:
  - Использует GPT (GUID Partition Table) и файловую систему FAT.
  - Загружает загрузчик напрямую из файла в системном разделе EFI (ESP).
  - Поддерживает API для управления оборудованием.

#### 3. **Примеры команд для UEFI**
- Просмотр текущей конфигурации загрузки:
  ```bash
  efibootmgr -v
  ```
  Пример вывода:
  ```
  BootCurrent: 0004
  BootOrder: 0000,0001,0002,0004,0003
  Boot0000* EFI DVD/CDROM
  Boot0001* EFI Hard Drive
  Boot0002* EFI Network
  Boot0003* EFI Internal Shell
  Boot0004* ubuntu HD(1,GPT,020c8d3e-fd8c-4880-9b61-ef4cffc3d76c,0x800,0x100000)/File(\EFI\ubuntu\shimx64.efi)
  ```

- Изменение порядка загрузки:
  ```bash
  sudo efibootmgr -o 0004,0002
  ```
  Это установит приоритет загрузки: сначала диск с Ubuntu, затем сеть.

#### 4. **Загрузчики**
- **Основная задача загрузчика**:
  - Определить и загрузить ядро операционной системы.
  - Передать аргументы ядру (например, `single` для однопользовательского режима).
- **GRUB** — основной загрузчик для Linux.
  - Поддерживает UEFI и BIOS.
  - Позволяет выбирать ядро или ОС для загрузки.

#### 5. **Примеры команд для GRUB**
- Обновление конфигурации GRUB:
  ```bash
  sudo update-grub
  ```
- Редактирование конфигурации GRUB:
  ```bash
  sudo nano /etc/default/grub
  ```
  Пример параметров:
  ```bash
  GRUB_DEFAULT=0
  GRUB_TIMEOUT=5
  GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
  GRUB_CMDLINE_LINUX=""
  ```

- Перезапись загрузчика на диск (для BIOS):
  ```bash
  sudo grub-install /dev/sda
  ```

#### 6. **Важные моменты**
- **BIOS**:
  - Использует MBR и загрузочные сектора.
  - Ограничен в функциональности.
- **UEFI**:
  - Использует GPT и файловую систему FAT.
  - Поддерживает прямое выполнение загрузчика из файла.
  - Позволяет управлять загрузкой через команды (например, `efibootmgr`).

#### 7. **Рекомендации**
- Для современных систем используйте UEFI и GPT.
- Для управления загрузкой в UEFI используйте `efibootmgr`.
- Для настройки GRUB редактируйте `/etc/default/grub` и обновляйте конфигурацию с помощью `update-grub`.

---

### Заключение
Современные системы загрузки (UEFI) предоставляют больше возможностей для управления процессом загрузки, чем устаревший BIOS. Использование инструментов, таких как `efibootmgr` и `GRUB`, позволяет гибко настраивать загрузку системы.